# AI Challenge: Trait Ontology Mapping

This project provides a comprehensive solution for evaluating and improving gene-trait mappings generated by LLM models using a Trait Ontology (TO) vector database. The approach combines traditional string matching techniques with modern NLP methods to ensure accurate trait identification and correction.

## Table of Contents
- [Data](#data)
- [Methodology](#methodology)
- [Results](#results)
- [Usage](#usage)
- [Contributing](#contributing)
- [License](#license)

## Data
The project utilizes the following data:

- Three CSV files containing model outputs including `trait_name` and `trait_id` mappings
- `trait_ontology_details.txt` containing official trait definitions, synonyms, and hierarchical relationships

The ontology entries include:
- Trait ID
- Trait name 
- Definition
- Synonyms
- Hierarchical relationships ('is_a')  
- Obsolescence ('is_obsolete')

## Methodology 
The solution implements a hierarchical matching system with multiple validation levels:

1. Exact Matching
2. Synonym & Partial Matching
3. String Similarity Matching (SequenceMatcher)
4. Semantic Matching with Mini LM L6
5. Semantic Matching with BERT
6. Synonym Matching + Semantic Matching with Mini LM L6
7. Synonym Matching + Semantic Matching with BERT
8. Ensemble Matcher

These methods are applied to evaluate the correctness of the trait mappings in the input CSV files. The correctness scores are then aggregated to rank the overall quality of the mappings in each file.

Error analysis is performed to identify common mismatch patterns and areas for improvement. A BERT-based semantic similarity approach is proposed to systematically correct the errors.

## Results
Key findings from the analysis:

- Model1 shows superior performance with 99.12% accuracy and highest perfect match rate (67.3%) 
- Model2 closely follows with 99.04% accuracy and balanced matching distribution
- Model3 shows significantly different patterns with 79.79% accuracy and heavy reliance on semantic matching
- Clear trend of decreasing exact matches and increasing dependency on semantic matching across models
- BERT semantic matching yields better high-confidence matches compared to Mini LM
- Varying synonym matching performance and presence of missing IDs in Model3

The BERT-based error correction method successfully identifies exact matches, finds semantically related traits for non-exact matches, and provides meaningful alternatives for missing IDs. A decision framework is proposed for implementing the corrections based on the confidence levels.

## Usage
1. Install the required dependencies listed in `requirements.txt`
2. Run the Jupyter notebook `trait_ontology_mapping.ipynb` to reproduce the analysis
3. Modify the notebook to experiment with different matching strategies and parameters

## Contributing
Contributions are welcome! Please follow these steps:
1. Fork the repository
2. Create a new branch for your feature or bug fix
3. Commit your changes and push to your fork
4. Open a pull request describing your changes

## License
This project is licensed under the MIT License. See `LICENSE` for more information.
